<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VibrantEnergy| Desafio</title>
    <link rel="stylesheet" href="css-VIbrantEnergy/paginaInicial.css">
    <link rel="stylesheet" href="css-VIbrantEnergy/login.css">
    <link rel="stylesheet" href="css-VIbrantEnergy/cadastro.css">
    <link rel="stylesheet" href="css-VIbrantEnergy/Curiosidades.css">
    <link rel="stylesheet" href="css-VIbrantEnergy/desafio.css">
</head>

<body>




    <div class="home">
        <div class="header">
            <div class="logo">
                <img src="img/camelia-flor.png" alt="Logo VibrantEnergy">
                <h2><a href="index.html"></a>VibrantEnergy</h2>
            </div>
            <div class="container">
                <span><a id="link" href="index.html">Página Inicial</a></span>
                <span><a id="link" href="index.html">Curiosidades</a></span>
                <span><a id="link" href="Desafio.html">Desafios</a></span>
                <span><a id="link" href="Login.html">Login</a></span>
                <span><a id="link" href="Cadastro.html">Cadastro</a></span>


            </div>
        </div>
        <div class="quiz">
            <h1>TESTE SEU CONHECIMENTO!</h1>
            <div class="container">
                <div class="divRank"><a href="ranking.html" id="linkRank">
                        <h3>Acesse o ranking!</h3> <img src="img/ranking.png" class="imagemTrofeu" alt="">
                    </a></div>

                <div id="tipoOuvinte">
                    <div id="fraseDevoto">
                        <h2 class="subtituloQuiz">Você é um ouvinte DEVOTO! </h2>
                        <span>Fiel ao que gosta , não costuma ouvir algo novo e cai de cabeça no que gosta</span>
                        <img class="imgOuvinte" src="img/cerebroDevoto.png" alt="">
                        <span id="pontuacao1">Pontuação: </span>
                    </div>
                    
                    <div id="fraseVisitante">
                        <h2 class="subtituloQuiz">Você é um ouvinte VISITANTE!</h2>
                        <span>Você possui seus gostos que você não larga, más está aberto a coisas novas</span>
                        <img class="imgOuvinte" src="img/cerebroVisitante.png" alt="">
                        <span id="pontuacao2">Pontuação: </span>
                    </div>
                    <div id="fraseEspecialista">
                        <h2 class="subtituloQuiz">Você é um ouvinte ESPECIALISTA!</h2>
                        <span> tem muito conhecimento sobre todos os estilos.</span>
                        <img class="imgOuvinte" src="img/cerebroEspecialista.png" alt="">
                        <span id="pontuacao3">Pontuação: </span>
                    </div>
                    <div id="fraseNomade">
                        <h2 class="subtituloQuiz">Você é um ouvinte NOMADE! </h2>
                        <span>não escuta somente um estilo de música, você não para, demonstrou ter dominio sobre todos
                            estilos !</span>
                        <img class="imgOuvinte" src="img/cerebroNomade.png" alt="">
                        <span id="pontuacao4">Pontuação: </span>
                    </div>
                </div>
                <div class="pergunta hide" id="desafio">
                    <span id="questao">São 4 alternativas e apenas uma chance para cada pergunta! Clique em "Próxima
                        pergunta" para começar</span><br><br>
                    <div id="div_resposta" class="div_resposta">
                        <button onclick="clique()" class="alternativa" id="alternativa1">A</button>
                        <button onclick="clique()" class="alternativa" id="alternativa2">B</button>
                        <button onclick="clique()" class="alternativa" id="alternativa3">C</button>
                        <button onclick="clique()" class="alternativa" id="alternativa4">D</button>
                    </div>
                    <div id="div_exibir"></div>
                </div>
                <div class="controleContainer">
                    <button onclick="iniciar()" id="ocultar" class="startdesafio">Iniciar</button>
                    <button onclick="proximaPergunta()" class="proximaPergunta hide" id="botaoDesafio">Próxima
                        pergunta</button>
                </div>
            </div>
            <div id="imgDesafio1"><img class="imgDesafio1" src="" alt=""></div>
        </div>

</body>

</html>
<script>

    var pontuacao = 0
    var listaPergunta1 = ["ILUSÃO (CRACOLÂNDIA)", "PRETOS NA MIRA", "RICO OU POBRE", "ILUSÃO"]
    var listaPergunta2 = ["GUNS N' ROSES", "NIRVANA", "BON JOVI", "RED HOT CHILI PEPPERS"]
    var listaPergunta3 = ["Lugar ao sol", "Só os loucos sabem", "Livre", "Céu Azul"]
    var listaPergunta4 = ["FREDDIE MERCURY", "BRYAN MAY", "JOHN LENNON", "MICHAEL JACKSON"]
    var listaPergunta5 = ["Ice Blue", "KL Jay", "Edi Rock", "Afro-X"]
    var listaPergunta6 = ["pedir pros homens cantarem por mim", "pedir pros anjos cantarem por mim", "dormir e sossegar", "pedir pros homens se calarem por mim"]
    var listaPergunta7 = ["Combate ao desmatamento das florestas no planeta", "Defesa dos povos indígenas", "Combate à fome e as doenças no continente africano", "Combate à pobreza e à fome mundial"]
    var listaPergunta8 = ["Tempo Perdido", "Pais e filhos", "Índios", "Metamorfose ambulante"]
    var listaPergunta9 = ["Olha a explosão", "Bum Bum Tam Tam", "Bumbum Granada", "Glamurosa"]
    var listaPergunta10 = ["Natiruts", "Maneva", "Armandinho", "Banda do Mar"]

    // document=fornece uma interface para interagir com a estrutura e os elementos da página web
    // document.getElementById=Retorna uma referência ao elemento com o ID especificado.
    var inicioDesafio = document.getElementById("ocultar");
    var desocultar = document.getElementById("desafio");
    var desocultar2 = document.getElementById("botaoDesafio");
    var perguntaAtual = 0
    var textoQuestao = document.getElementById("questao");
    var alternativa1 = document.getElementById("alternativa1");
    var alternativa2 = document.getElementById("alternativa2");
    var alternativa3 = document.getElementById("alternativa3");
    var alternativa4 = document.getElementById("alternativa4");
    var divResposta = document.getElementById("div_resposta");
    var exibir = document.getElementById("div_exibir");
    var ouvinte = document.getElementById("tipoOuvinte")
    var rankingDisplay = document.getElementById("linkRank")
    function iniciar() {
        inicioDesafio.style.display = "none";
        desocultar.style.display = "block"
        desocultar2.style.display = "block"
        rankingDisplay.style.display = "none"
    }

    function proximaPergunta() {
        if (perguntaAtual == 10) {
            desocultar.style.display = "none"
            desocultar2.style.display = "none"
            textoQuestao.style.display = "none"
            exibir.style.display = "block"

            ouvinte.style.display = "block"
            return jogoEncerrado();
        }
        desocultar.style.display = "block"
        // desocultar2.style.display = "block"

        // firstChild= representa qualquer elemento que seja o primeiro filho de seus pais.
        // removendo respostas antigas

        for (var repeticao = 1; repeticao <= 4; repeticao += 1) {
            divResposta.removeChild(divResposta.firstElementChild);
        }
        textoQuestao.textContent = listaPerguntas[perguntaAtual].question
        // forEach= utilizado sempre que queremos que uma determinada função seja aplicada em todos os elementos de um array, pois elimina a necessidade de escrevermos muitas linhas de códigos.
        listaPerguntas[perguntaAtual].answers.forEach(answers => {
            // createElement= Cria um novo elemento com a tag HTML especificada.
            const novaResposta = document.createElement("button")
            novaResposta.classList.add("alternativa")
            novaResposta.textContent = answers.text;

            if (answers.correct) {
                // dataset= acessar e manipular atributos de dados personalizados em elementos HTML
                novaResposta.dataset.correct = answers.correct

            }

            //appendChild= adicionar elementos ao HTML de forma dinâmica
            divResposta.appendChild(novaResposta)
            novaResposta.addEventListener("click", selecionarResposta)

        });
    }

    function selecionarResposta() {
        var respostaClicada = event.target
        perguntaAtual += 1
        document.querySelectorAll(".alternativa").forEach(button => {
            // O dataset é uma propriedade dos elementos HTML que permite armazenar dados personalizados

            if (button.dataset.correct) {
                button.classList.add("correct")

            } else {
                button.classList.add("incorrect")
            }
            button.disabled = true

        })
        if (respostaClicada.dataset.correct) {
            pontuacao += 1
        }
    }
    var devoto = document.getElementById("fraseDevoto");
    var visitante = document.getElementById("fraseVisitante");
    var especialista = document.getElementById("fraseEspecialista");
    var nomade = document.getElementById("fraseNomade");

    function jogoEncerrado() {
        ouvinte.style.display = "flex"
        rankingDisplay.style.display = "flex"
        if (pontuacao <= 3) {
            devoto.style.display = "flex"
            pontuacao1.innerHTML += `${pontuacao}/10`
        } else if (pontuacao <= 6) {
            visitante.style.display = "flex"
            pontuacao2.innerHTML += `${pontuacao}/10`
        }
        else if (pontuacao <= 9) {
            especialista.style.display = "flex"
            pontuacao3.innerHTML += `${pontuacao}/10`
        } else {
            nomade.style.display = "flex"
            pontuacao4.innerHTML += `${pontuacao}/10`
        }
        // tentativa passar para banco
        var fkUsuario = sessionStorage.getItem('ID_USUARIO')

        const date = new Date();
        const dia = date.getDate().toString();
        const ano = date.getFullYear().toString();
        const mes = (date.getMonth() + 1).toString();

        const dataAtual = `${ano}-${mes}-${dia}`


        fetch("/usuarios/jogoEncerrado", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
            },
            body: JSON.stringify({
                // crie um atributo que recebe o valor recuperado aqui
                // Agora vá para o arquivo routes/usuario.js
                pontuacaoServer: pontuacao,
                fkUsuarioServer: fkUsuario,
                dataAtualServer: dataAtual
            }),
        }) 
            .then(function (resposta) {
                console.log("resposta: ", resposta);

                if (resposta.ok) {
                    cardErro.style.display = "block";

                    mensagem_erro.innerHTML =
                        "Cadastro realizado com sucesso! Redirecionando para tela de Login...";

                    // setTimeout(() => {
                    //     window.location = "login.html";
                    // }, "2000");

                }
            })
    }
    const listaPerguntas = [
        {
            question: "1) O trecho 'Enquanto a lata chacoalhar e a ilusão for a sensação de ser mais poderoso...' pertence a qual música:",
            answers: [
                { text: `A. ${listaPergunta1[0]}`, correct: true },
                { text: `B. ${listaPergunta1[1]}`, correct: false },
                { text: `C. ${listaPergunta1[2]}`, correct: false },
                { text: `D. ${listaPergunta1[3]}`, correct: false }
            ]
        },
        {
            question: "2) A MÚSICA Livin' on a Prayer PERTENCE a :",
            answers: [
                { text: "A. " + listaPergunta2[0], correct: false },
                { text: "B. " + listaPergunta2[1], correct: false },
                { text: "C. " + listaPergunta2[2], correct: true },
                { text: "D. " + listaPergunta2[3], correct: false }
            ]
        },
        {
            question: "3) ....Livre pra poder sorrir sim, livre pra poder buscar o meu lugar... É um trecho de qual música da banda Charlie Brown Jr:",
            answers: [
                { text: "A. " + listaPergunta3[0], correct: true },
                { text: "B. " + listaPergunta3[1], correct: false },
                { text: "C. " + listaPergunta3[2], correct: false },
                { text: "D. " + listaPergunta3[3], correct: false }
            ]
        },
        {
            question: "4) Qual o nome do vocalista de banda Queen:",
            answers: [
                { text: "A. " + listaPergunta4[0], correct: true },
                { text: "B. " + listaPergunta4[1], correct: false },
                { text: "C. " + listaPergunta4[2], correct: false },
                { text: "D. " + listaPergunta4[3], correct: false }
            ]
        },
        {
            question: "5) Qual destes artistas não pertence ao grupo de RAP Racionais MC's:",
            answers: [
                { text: "A. " + listaPergunta5[0], correct: false },
                { text: "B. " + listaPergunta5[1], correct: false },
                { text: "C. " + listaPergunta5[2], correct: false },
                { text: "D. " + listaPergunta5[3], correct: true }
            ]
        },
        {
            question: "6) Complete a música 'Em algum lugar, pra relaxar, eu vou ______...':",
            answers: [
                { text: "A. " + listaPergunta6[0], correct: false },
                { text: "B. " + listaPergunta6[1], correct: true },
                { text: "C. " + listaPergunta6[2], correct: false },
                { text: "D. " + listaPergunta6[3], correct: false }
            ]
        },
        {
            question: "7) A música 'We Are The World'(Nós somos o mundo) foi criada no intuito de arrecadar fundos para:",
            answers: [
                { text: "A. " + listaPergunta7[0], correct: false },
                { text: "B. " + listaPergunta7[1], correct: false },
                { text: "C. " + listaPergunta7[2], correct: true },
                { text: "D. " + listaPergunta7[3], correct: false }
            ]
        },
        {
            question: "8) Qual destas não é uma música da banda Legião Urbana:",
            answers: [
                { text: "A. " + listaPergunta8[0], correct: false },
                { text: "B. " + listaPergunta8[1], correct: false },
                { text: "C. " + listaPergunta8[2], correct: false },
                { text: "D. " + listaPergunta8[3], correct: true }
            ]
        },
        {
            question: "9) Qual o funk brasileiro mais tocado de todos os tempos:",
            answers: [
                { text: "A. " + listaPergunta9[0], correct: false },
                { text: "B. " + listaPergunta9[1], correct: true },
                { text: "C. " + listaPergunta9[2], correct: false },
                { text: "D. " + listaPergunta9[3], correct: false }
            ]
        },
        {
            question: "10) Qual destas não é uma banda ou cantor de Reggae:",
            answers: [
                { text: "A. " + listaPergunta10[0], correct: false },
                { text: "B. " + listaPergunta10[1], correct: false },
                { text: "C. " + listaPergunta10[2], correct: false },
                { text: "D. " + listaPergunta10[3], correct: true }
            ]
        }
    ]

</script>