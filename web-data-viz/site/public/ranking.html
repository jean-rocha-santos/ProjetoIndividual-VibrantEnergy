<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VibrantEnergy| Desafio</title>
    <link rel="stylesheet" href="css-VIbrantEnergy/paginaInicial.css">
    <link rel="stylesheet" href="css-VIbrantEnergy/login.css">
    <link rel="stylesheet" href="css-VIbrantEnergy/Curiosidades.css">
    <link rel="stylesheet" href="css-VIbrantEnergy/desafio.css">
    <link rel="stylesheet" href="css-VIbrantEnergy/ranking.css">

</head>

<body onload="mostrarRanking()">

    <div class="header">
        <div class="logo">
            <img src="img/camelia-flor.png" alt="Logo VibrantEnergy">
            <h2><a href="index.html"></a>VibrantEnergy</h2>
        </div>
        <div class="container">
            <span><a href="index.html">Página Inicial</a></span>
            <span><a href="index.html">Curiosidades</a></span>
            <span><a href="Desafio.html">Desafios</a></span>
            <span><a href="login.html">Login</a></span>
            <span><a href="Cadastro.html">Cadastro</a></span>

        </div>
    </div>
    <div class="containerRanking">
        <div class="kpis">
            <div class="fomularioKpi1">
                <div class="cardKpi" id="cardDevoto">  </div>
                <div class="cardKpi" id="cardVisitante"> </div>
            </div>
            <div class="fomularioKpi2">
                <div class="cardKpi" id="cardEspecialista"> </div>
                <div class="cardKpi" id="cardNomade">  </div>
            </div>
        </div>
        <div class="ranking">
            <h1 class="textoRank"><img src="img/ranking.png" class="imagemTrofeu" alt="">RANKING<img
                    src="img/ranking.png" class="imagemTrofeu" alt=""></h1>
            <img src="img/coroa (2).png " class="coroaImg" alt="">
            <div class="formulario" id="div_exibir" style="color: white;">

                <div class="rankingQuiz">
                    <div id="posicaoRanking"> Posicão <br><br>
                        <div id="posicaoUsuario">1- <br><br>2- <br><br> 3- <br><br> 4- <br><br> 5- <br><br> 6- <br><br> 7- <br><br> 8- <br> <br> 9- <br><br> 10- <br><br>
                        </div>
                    </div>
                    <div class="campoRank" id="nomeUsuario">Nome usuário <br> <br>
                        <div id="nomeRank"></div>
                    </div>
                    <div class="campoRank" id="pontosFeitos">Pontos <br> <br>
                        <div id="pontosRank"></div>
                    </div>
                    <div class="campoRank" id="tipoOuvintes">Tipo Ouvinte <br> <br>
                        <div id="tipoRank"></div>
                    </div>

                    <div class="campoRank" id="dataTentativa">Data Tentativa <br><br>
                        <div id="dataTentativaRank"></div>
                    </div>
                </div>
            </div>
        </div>
        <img src="img/rankFundo (2).jpeg  " class="fundoRank" alt="" style="opacity: 0.4;">

</body>

</html>

<script>

    async function mostrarRanking() {

        var ranking = await fetch("/usuarios/mostrarRanking", {
            method: "GET",
            headers: {
                "Content-Type": "application/json",
            }
        }).then(res => res.json())
        for (var posicao = 0; posicao < ranking.length; posicao += 1) {
            resultadoRanking(ranking[posicao])
        }
    }

    var pontosDevotos =0
    var pontosVisitante =0
    var pontosEspecialista =0
    var pontosNomade =0
    
    var maximoRank = 0
    function resultadoRanking(rank) {
        
        if (maximoRank <10){
        nomeRank.innerHTML += `${rank.nome}<br><br>`
        pontosRank.innerHTML += `${rank.pontuacao}<br><br>`
        dataTentativaRank.innerHTML += `${rank.dataTentativa}<br><br>`
        tipoRank.innerHTML+= `${rank.tipoUsuario}<br><br>`
        maximoRank+=1
    }
            if (rank.tipoUsuario=="Devoto"){
                pontosDevotos +=1
                cardDevoto.innerHTML= ' Quantidade <br> DEVOTO <br>' +pontosDevotos 
            }
            if (rank.tipoUsuario=="Visitante"){
                pontosVisitante+=1
                cardVisitante.innerHTML= 'Quantidade <br> VISITANTE <br>'+pontosVisitante 
            }
            if (rank.tipoUsuario=="Especialista"){
                pontosEspecialista+=1
                cardEspecialista.innerHTML= '  Quantidade ESPECIALISTA <br>'+pontosEspecialista 
            }
            if (rank.tipoUsuario=="Nomade"){
                pontosNomade+=1
                cardNomade.innerHTML='   Quantidade <br> NOMADE <br>'+ pontosNomade 
            }
            
        }
   


</script>